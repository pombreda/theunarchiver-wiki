#summary Reverse-engineered specs DiskDoubler algorithms 2 and 5

= Introduction =

DiskDoubler's algorithms numbers 2 and 5 appears to use an extremely uncommon compression method, splay tree compression. A splay tree is used like a Huffman tree to perform adaptive prefix coding. More about splay tree compression can be found at http://www.fadden.com/techmisc/hdc/lesson05.htm.

DiskDoubler uses 256 splay trees (or optionally less, for algorithm 5) to encode individual bytes. Which tree to use for each byte is determined by the previous byte (if less than 256 trees are used, the low-order bits are used to select the tree).

See http://code.google.com/p/theunarchiver/source/browse/XADMaster/XADDiskDoublerMethod2Handle.m for the specifics of the algorithm.

= Benchmarks =

== The Canterbury Corpus ==

||   || text || fax || Csrc || Excl || SPRC || tech || poem || html || list || man || play || Average ||
|| DD2 || 4.03 || 1.58 || 3.54 || 2.99 || 3.71 || 4.03 || 4.04 || 4.33 || 3.67 || 4.39 || 3.97 || 3.66 ||
|| gzip-b || *2.85* || *0.82* || *2.24* || *1.63* || *2.67* || *2.71* || *3.23* || *2.59* || *2.65* || *3.31* || *3.12* || *2.53* ||
|| gzip-f || 3.43 || 1.02 || 2.63 || 1.90 || 2.96 || 3.26 || 3.80 || 2.94 || 2.89 || 3.53 || 3.63 || 2.91 ||
|| compress || 3.27 || 0.97 || 3.56 || 2.41 || 4.21 || 3.06 || 3.38 || 3.68 || 3.90 || 4.43 || 3.51 || 3.31 ||
|| lzrw1 || 4.94 || 2.05 || 3.61 || 2.53 || 4.55 || 4.79 || 5.44 || 4.26 || 4.02 || 4.68 || 5.16 || 4.18 ||
|| char || 4.59 || 1.22 || 5.14 || 3.58 || 5.38 || 4.68 || 4.54 || 5.31 || 4.96 || 5.20 || 4.83 || 4.49 ||

== The Artificial Corpus ==

||   || a || aaa || alphabet || random || Average ||
|| DD2 || *8.00* || 1.00 || 1.00 || 7.31 || *4.33* ||
|| gzip-b || 168.00 || *0.01* || *0.02* || *6.05* || 43.52 ||
|| gzip-f || 168.00 || 0.04 || 0.05 || 6.18 || 43.57 ||
|| compress || 40.00 || 0.04 || 0.24 || 7.39 || 11.92 ||
|| lzrw1 || 104.00 || 1.07 || 1.07 || 8.00 || 28.53 ||
|| char || 128.00 || 0.03 || 4.74 || *6.05* || 34.71 ||

== The Large Corpus ==

||   || E.coli || bible || world || Average ||
|| DD2 || 2.40 || 3.73 || 4.11 || 3.41 ||
|| gzip-b || 2.24 || *2.33* || *2.33* || *2.30* ||
|| gzip-f || 2.63 || 2.95 || 2.97 || 2.85 ||
|| compress || 2.17 || 2.77 || 3.19 || 2.71 ||
|| lzrw1 || 5.02 || 4.36 || 5.03 || 4.80 ||
|| char || *2.01* || 4.35 || 5.00 || 3.79 ||

== The Miscellaneous Corpus ==

||   || pi || Average ||
|| DD2 || 3.98 || 3.98 ||
|| gzip-b || 3.76 || 3.76 ||
|| gzip-f || 3.98 || 3.98 ||
|| compress || 3.75 || 3.75 ||
|| lzrw1 || 5.81 || 5.81 ||
|| char || *3.33* || *3.33* ||

== The Calgary Corpus ==

||   || bib || book1 || book2 || geo || news || obj1 || obj2 || paper1 || paper2 || pic || progc || progl || progp || trans || Average ||
|| DD2 || 4.11 || 4.23 || 4.14 || *5.18* || 4.49 || 4.64 || 3.66 || 4.17 || 4.15 || 1.58 || 3.96 || 3.36 || 3.38 || 3.62 || 3.90 ||
|| gzip-b || *2.51* || *3.25* || *2.70* || 5.34 || *3.06* || *3.84* || *2.63* || *2.79* || *2.89* || *0.82* || *2.68* || *1.80* || *1.81* || *1.61* || *2.69* ||
|| gzip-f || 3.15 || 3.80 || 3.26 || 5.45 || 3.48 || 3.98 || 3.04 || 3.25 || 3.41 || 1.02 || 3.12 || 2.24 || 2.17 || 2.05 || 3.10 ||
|| compress || 3.35 || 3.46 || 3.28 || 6.08 || 3.86 || 5.23 || 4.17 || 3.77 || 3.52 || 0.97 || 3.87 || 3.03 || 3.11 || 3.27 || 3.64 ||
|| lzrw1 || 4.77 || 5.47 || 4.75 || 6.77 || 4.94 || 4.93 || 4.13 || 4.63 || 4.90 || 2.05 || 4.37 || 3.53 || 3.43 || 3.71 || 4.46 ||
|| char || 5.23 || 4.54 || 4.80 || 5.66 || 5.20 || 6.01 || 6.28 || 5.02 || 4.63 || 1.22 || 5.25 || 4.80 || 4.91 || 5.56 || 4.94 ||